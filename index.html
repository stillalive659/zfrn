<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MTK-SMP</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="taskbar">
    <span></span><span></span><span></span>
  </div>
  <div class="a">
    <h1 class="welcome">Soal Olimpiade MTK Tingkat SMP</h1>
    <input type="text" placeholder="Search" class="search">
  </div>
  <br>
  <div class="main" id="main"></div>

 <script>
fetch("https://raw.githubusercontent.com/stillalive659/zfrn/refs/heads/main/confiq.json")
  .then(res => res.json())
  .then(data => {
    let container = document.getElementById("main");

    data.name.forEach((nama, index) => {
      let tahun = data.tahun[index];
      let jumlahSoal = data.soal[index];
      let driveLink = data.link[index];

      // ambil FILE_ID dari link Google Drive
      let fileId = driveLink.match(/\/d\/(.*?)\//)[1];
      let directDownload = `https://drive.google.com/uc?export=download&id=${fileId}`;

      let isi = document.createElement("div");
      isi.classList.add("isi");
      isi.innerHTML = `
        <div class="info">
          <h2>${nama}</h2>
          <h4>${tahun}, ${jumlahSoal} soal</h4>
        </div>
        <img src="download.svg" alt="Download" class="download" id="btn${index}">
      `;
      container.appendChild(isi);

      // tombol download
      let btn = isi.querySelector(`#btn${index}`);
      btn.addEventListener("click", () => {
        let link = document.createElement("a");
        link.href = directDownload;
        link.download = `${nama}.pdf`; // nama file hasil download
        link.click();
      });
    });
  })
  .catch(err => console.error("Gagal fetch JSON:", err));
</script>


</body>
</html>
